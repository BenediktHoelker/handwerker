<mvc:View xmlns:core="sap.ui.core" controllerName="handwerker.components.orders.controller.Main" displayBlock="true"
	xmlns="sap.m"
	xmlns:form="sap.ui.layout.form"
	xmlns:smartfield="sap.ui.comp.smartfield"
	xmlns:mvc="sap.ui.core.mvc">
	<SplitApp id="splitApp" initialDetail="detail" initialMaster="master">
		<masterPages>
			<Page id="masterPage" showHeader="false" backgroundDesign="List" floatingFooter="true">
				<List id="ordersList" mode="SingleSelectMaster" items="{
				path: '/Orders', 
				parameters: {expand : 'client'},
				sorter: {path: 'clientName', group: true}}" selectionChange="onSelectionChange">
					<headerToolbar>
						<Toolbar>
							<DynamicDateRange/>
						</Toolbar>
					</headerToolbar>
					<StandardListItem title="{createdOn}"/>
				</List>
				<footer>
					<Toolbar >
						<ToolbarSpacer />
						<Button type="Emphasized" icon="sap-icon://add" press="onPressCreateOrder"/>
					</Toolbar>
				</footer>
			</Page>
		</masterPages>
		<detailPages>
			<Page id="detailPage" showHeader="false" floatingFooter="true">
				<form:SimpleForm editable="true" layout="ResponsiveGridLayout" title="{createdOn}" labelSpanXL="4" labelSpanL="3" labelSpanM="4" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="4" emptySpanM="0" emptySpanS="0" columnsXL="2" columnsL="1" columnsM="1">
					<core:Title text="{i18n>header}"/>
					<smartfield:SmartLabel labelFor="client_ID"/>
					<smartfield:SmartField id="client_ID" value="{client_ID}" textInEditModeSource="ValueList"/>
					<core:Title text="{i18n>orderItems}"/>
					<Table id="itemsTable" items="{path: 'items', parameters: {expand : 'equipment'}}" fixedLayout="false">
						<headerToolbar>
							<Toolbar >
								<ToolbarSpacer />
								<Button type="Emphasized" icon="sap-icon://add" press="onPressCreateOrderItem"/>
							</Toolbar>
						</headerToolbar>
						<columns>
							<Column >
								<Label text="{/OrderItems/equipment_ID/##com.sap.vocabularies.Common.v1.Label/String}"></Label>
							</Column>
							<Column >
								<Label text="{/OrderItems/quantity/##com.sap.vocabularies.Common.v1.Label/String}"></Label>
							</Column>
							<Column/>
						</columns>
						<ColumnListItem >
							<cells>
								<smartfield:SmartField value="{equipment_ID}" textInEditModeSource="ValueList"/>
								<smartfield:SmartField value="{quantity}"/>
								<Button icon="sap-icon://delete" press="onPressDeleteItem"/>
							</cells>
						</ColumnListItem>
					</Table>
				</form:SimpleForm>
				<footer>
					<Toolbar >
						<ToolbarSpacer />
						<Button type="Emphasized" text="{i18n>submit}" press="onPressSubmit"/>
					</Toolbar>
				</footer>
			</Page>
		</detailPages>
	</SplitApp>
</mvc:View>