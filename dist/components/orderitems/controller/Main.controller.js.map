{"version":3,"file":"Main.controller.js","names":["BaseController","_interopRequireDefault","__BaseController","formatter","__formatter","Main","extend","constructor","prototype","apply","arguments","onInit","_onInit","router","getRouter","getRoute","attachPatternMatched","byId","getBinding","attachEventOnce","event","onMasterListBindingChange","_onMasterListBindingChange","masterList","firstMasterListItem","getItems","path","getBindingContext","getPath","bindElement","onSelectionChange","_onSelectionChange","listItem","getParameters","expand","onPressSubmit","_onPressSubmit","model","getModel","submitChanges","onPressToggleMaster","_onPressToggleMaster","splitApp","isMasterShown","toDetail","toMaster"],"sources":["Main.controller.ts"],"sourcesContent":["import BaseController from './BaseController';\nimport formatter from '../model/formatter';\nimport List from 'sap/m/List';\nimport SplitApp from 'sap/m/SplitApp';\nimport UI5Event from 'sap/ui/base/Event';\nimport ODataModel from 'sap/ui/model/odata/v2/ODataModel';\n\n/**\n * @namespace handwerker.components.orderitems.controller\n */\nexport default class Main extends BaseController {\n  private formatter = formatter;\n\n  /**\n   * onInit\n   */\n  public onInit() {\n    const router = this.getRouter();\n\n    router.getRoute('main').attachPatternMatched(() => {\n      this.byId('masterList')\n        .getBinding('items')\n        .attachEventOnce('change', (event: UI5Event) => {\n          this.onMasterListBindingChange(event);\n        });\n    });\n  }\n\n  public onMasterListBindingChange(event: UI5Event) {\n    const masterList = this.byId('masterList') as List;\n    const firstMasterListItem = masterList.getItems()[0];\n    const path = firstMasterListItem.getBindingContext().getPath();\n\n    this.byId('detailPage').bindElement(path);\n  }\n\n  public onSelectionChange(event: UI5Event) {\n    const { listItem } = event.getParameters();\n    if (!listItem.getBindingContext()) return; // Group headers don't have a context\n\n    this.byId('detailPage').bindElement(\n      listItem.getBindingContext().getPath(),\n      { expand: 'equipment' }\n    );\n  }\n\n  onPressSubmit() {\n    const model = this.getModel() as ODataModel;\n    model.submitChanges();\n  }\n\n  public onPressToggleMaster() {\n    const splitApp = this.byId('splitApp') as SplitApp;\n\n    if (splitApp.isMasterShown()) {\n      splitApp.toDetail('detailPage', 'slide', {}, {});\n    } else {\n      splitApp.toMaster('masterPage', 'slide', {}, {});\n    }\n  }\n\n  // initNewWorkItem(startDate = roundTimeToQuarterHour(Date.now())) {\n  //   const model = this.getModel();\n  //   const MyCategoriesNested = model.getProperty('/MyCategoriesNested');\n\n  //   const workItem = {\n  //     title: '',\n  //     confirmed: true,\n  //     date: startDate,\n  //     // dateISOString: now,\n  //     activatedDate: startDate,\n  //     completedDate: addMinutes(startDate, 15)\n  //     // activity: model.getData().activities[0],\n  //     // location: model.getData().locations[0],\n  //   };\n\n  //   model.setProperty('/MyWorkItems/NEW', workItem);\n  //   model.setProperty('/MyCategoriesNestedAndFiltered', MyCategoriesNested);\n\n  //   this.byId('hierarchyTree').clearSelection(true);\n  // }\n}\n"],"mappings":";;;;QAAOA,cAAc,GAAAC,sBAAA,CAAAC,gBAAA;EAAA,MACdC,SAAS,GAAAF,sBAAA,CAAAG,WAAA;EAMhB;AACA;AACA;EAFA,MAGqBC,IAAI,GAASL,cAAc,CAAAM,MAAA;IAAAC,WAAA,WAAAA,YAAA;MAAAP,cAAA,CAAAQ,SAAA,CAAAD,WAAA,CAAAE,KAAA,OAAAC,SAAA;MAAA,KACtCP,SAAS,GAAGA,SAAS;IAAA;IAKtBQ,MAAM,WAAAC,QAAA,EAAG;MACd,MAAMC,MAAM,GAAG,IAAI,CAACC,SAAS,EAAE;MAE/BD,MAAM,CAACE,QAAQ,CAAC,MAAM,CAAC,CAACC,oBAAoB,CAAC,MAAM;QACjD,IAAI,CAACC,IAAI,CAAC,YAAY,CAAC,CACpBC,UAAU,CAAC,OAAO,CAAC,CACnBC,eAAe,CAAC,QAAQ,EAAGC,KAAe,IAAK;UAC9C,IAAI,CAACC,yBAAyB,CAACD,KAAK,CAAC;QACvC,CAAC,CAAC;MACN,CAAC,CAAC;IACJ,CAAC;IAEMC,yBAAyB,WAAAC,2BAACF,KAAe,EAAE;MAChD,MAAMG,UAAU,GAAG,IAAI,CAACN,IAAI,CAAC,YAAY,CAAS;MAClD,MAAMO,mBAAmB,GAAGD,UAAU,CAACE,QAAQ,EAAE,CAAC,CAAC,CAAC;MACpD,MAAMC,IAAI,GAAGF,mBAAmB,CAACG,iBAAiB,EAAE,CAACC,OAAO,EAAE;MAE9D,IAAI,CAACX,IAAI,CAAC,YAAY,CAAC,CAACY,WAAW,CAACH,IAAI,CAAC;IAC3C,CAAC;IAEMI,iBAAiB,WAAAC,mBAACX,KAAe,EAAE;MACxC,MAAM;QAAEY;MAAS,CAAC,GAAGZ,KAAK,CAACa,aAAa,EAAE;MAC1C,IAAI,CAACD,QAAQ,CAACL,iBAAiB,EAAE,EAAE,OAAO,CAAC;;MAE3C,IAAI,CAACV,IAAI,CAAC,YAAY,CAAC,CAACY,WAAW,CACjCG,QAAQ,CAACL,iBAAiB,EAAE,CAACC,OAAO,EAAE,EACtC;QAAEM,MAAM,EAAE;MAAY,CAAC,CACxB;IACH,CAAC;IAEDC,aAAa,WAAAC,eAAA,EAAG;MACd,MAAMC,KAAK,GAAG,IAAI,CAACC,QAAQ,EAAgB;MAC3CD,KAAK,CAACE,aAAa,EAAE;IACvB,CAAC;IAEMC,mBAAmB,WAAAC,qBAAA,EAAG;MAC3B,MAAMC,QAAQ,GAAG,IAAI,CAACzB,IAAI,CAAC,UAAU,CAAa;MAElD,IAAIyB,QAAQ,CAACC,aAAa,EAAE,EAAE;QAC5BD,QAAQ,CAACE,QAAQ,CAAC,YAAY,EAAE,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MAClD,CAAC,MAAM;QACLF,QAAQ,CAACG,QAAQ,CAAC,YAAY,EAAE,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MAClD;IACF;EAAC;EAAA,OAjDkBxC,IAAI;AAAA"}